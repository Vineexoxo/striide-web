use std::collections::HashSet;
use serde_json::{json, Value};

fn main() {
    let geojson_str = r#"
        {
  "features": [
    {
      "geometry": {
        "coordinates": [
          [
            -71.1099749,
            42.4096919
          ],
          [
            -71.1100058,
            42.4096983
          ],
          [
            -71.1100058,
            42.4096983
          ],
          [
            -71.1138,
            42.4099543
          ],
          [
            -71.1119028961287,
            42.40982631563941
          ],
          [
            -71.11095434709641,
            42.409762311729544
          ],
          [
            -71.1104800733062,
            42.409730306842235
          ],
          [
            -71.1102429365926,
            42.40971430366548
          ],
          [
            -71.11012436828118,
            42.409706301893834
          ],
          [
            -71.1100650841368,
            42.409702300962195
          ],
          [
            -71.11003544206746,
            42.40970030048492
          ],
          [
            -71.11002062103348,
            42.409699300243425
          ],
          [
            -71.11001321051668,
            42.40969880012195
          ],
          [
            -71.11000950525832,
            42.40969855006103
          ],
          [
            -71.11000765262915,
            42.409698425030534
          ],
          [
            -71.11000672631458,
            42.40969836251528
          ],
          [
            -71.11000626315729,
            42.40969833125764
          ],
          [
            -71.11000603157865,
            42.409698315628816
          ],
          [
            -71.11000591578932,
            42.40969830781441
          ],
          [
            -71.11000585789465,
            42.4096983039072
          ],
          [
            -71.11000582894732,
            42.40969830195361
          ],
          [
            -71.11000581447367,
            42.4096983009768
          ],
          [
            -71.11000580723683,
            42.4096983004884
          ],
          [
            -71.1100058036184,
            42.40969830024421
          ],
          [
            -71.1100058018092,
            42.4096983001221
          ],
          [
            -71.11000580090459,
            42.40969830006106
          ],
          [
            -71.1100058004523,
            42.40969830003053
          ],
          [
            -71.11000580022615,
            42.409698300015265
          ],
          [
            -71.11000580011307,
            42.40969830000763
          ],
          [
            -71.11000580005653,
            42.40969830000382
          ],
          [
            -71.11000580002826,
            42.40969830000191
          ],
          [
            -71.11000580001412,
            42.409698300000954
          ],
          [
            -71.11000580000707,
            42.40969830000047
          ],
          [
            -71.11000580000353,
            42.40969830000024
          ],
          [
            -71.11000580000176,
            42.40969830000011
          ],
          [
            -71.11000580000088,
            42.40969830000006
          ],
          [
            -71.11000580000044,
            42.40969830000003
          ],
          [
            -71.11000580000022,
            42.40969830000002
          ],
          [
            -71.11000580000011,
            42.40969830000001
          ],
          [
            -71.11000580000005,
            42.40969830000001
          ],
          [
            -71.11000580000002,
            42.40969830000001
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.11000580000002,
            42.4096983
          ],
          [
            -71.1119028961287,
            42.40982631563941
          ],
          [
            -71.11285144709665,
            42.409890311729576
          ],
          [
            -71.11332572330642,
            42.40992230684226
          ],
          [
            -71.11356286159274,
            42.4099383036655
          ],
          [
            -71.11368143078126,
            42.40994630189385
          ],
          [
            -71.11374071538684,
            42.4099503009622
          ],
          [
            -71.11377035769249,
            42.40995230048492
          ],
          [
            -71.113785178846,
            42.409953300243416
          ],
          [
            -71.11379258942294,
            42.40995380012195
          ],
          [
            -71.11379629471148,
            42.40995405006103
          ],
          [
            -71.11379814735574,
            42.409954175030535
          ],
          [
            -71.11379907367788,
            42.40995423751527
          ],
          [
            -71.11379953683894,
            42.409954268757645
          ],
          [
            -71.11379976841948,
            42.40995428437883
          ],
          [
            -71.11379988420975,
            42.40995429218942
          ],
          [
            -71.11379994210489,
            42.40995429609471
          ],
          [
            -71.11379997105246,
            42.40995429804736
          ],
          [
            -71.11379998552623,
            42.40995429902369
          ],
          [
            -71.11379999276312,
            42.40995429951184
          ],
          [
            -71.11379999638156,
            42.40995429975592
          ],
          [
            -71.11379999819079,
            42.40995429987796
          ],
          [
            -71.1137999990954,
            42.40995429993898
          ],
          [
            -71.11379999954771,
            42.40995429996949
          ],
          [
            -71.11379999977386,
            42.40995429998475
          ],
          [
            -71.11379999988694,
            42.40995429999237
          ],
          [
            -71.11379999994348,
            42.40995429999619
          ],
          [
            -71.11379999997175,
            42.40995429999809
          ],
          [
            -71.11379999998589,
            42.40995429999905
          ],
          [
            -71.11379999999295,
            42.40995429999953
          ],
          [
            -71.11379999999647,
            42.40995429999976
          ],
          [
            -71.11379999999825,
            42.40995429999988
          ],
          [
            -71.11379999999913,
            42.40995429999994
          ],
          [
            -71.11379999999957,
            42.409954299999974
          ],
          [
            -71.11379999999978,
            42.40995429999998
          ],
          [
            -71.1137999999999,
            42.40995429999999
          ],
          [
            -71.11379999999996,
            42.409954299999995
          ],
          [
            -71.11379999999998,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.409954299999995
          ],
          [
            -71.1138,
            42.4099543
          ],
          [
            -71.1138291,
            42.4099546
          ]
        ],
        "type": "LineString"
      },
      "properties": {},
      "type": "Feature"
    },
    {
      "geometry": {
        "coordinates": [
          [
            -71.1137085,
            42.410049
          ],
          [
            -71.11369,
            42.4100387
          ],
          [
            -71.11369,
            42.4100387
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1100985,
            42.4097899
          ],
          [
            -71.11188399652153,
            42.40991211385351
          ],
          [
            -71.11277674739124,
            42.40997321039015
          ],
          [
            -71.11322312347825,
            42.41000375606093
          ],
          [
            -71.11344631168478,
            42.41001902824693
          ],
          [
            -71.1135579058288,
            42.41002666417758
          ],
          [
            -71.11361370291101,
            42.41003048210232
          ],
          [
            -71.11364160145466,
            42.41003239105454
          ],
          [
            -71.11365555072712,
            42.41003334552811
          ],
          [
            -71.11366252536351,
            42.41003382276427
          ],
          [
            -71.11366601268173,
            42.41003406138219
          ],
          [
            -71.11366775634086,
            42.410034180691106
          ],
          [
            -71.11366862817043,
            42.41003424034556
          ],
          [
            -71.11366906408522,
            42.41003427017278
          ],
          [
            -71.11366928204261,
            42.4100342850864
          ],
          [
            -71.1136693910213,
            42.4100342925432
          ],
          [
            -71.11366944551065,
            42.4100342962716
          ],
          [
            -71.11366947275533,
            42.4100342981358
          ],
          [
            -71.11366948637767,
            42.4100342990679
          ],
          [
            -71.11366949318884,
            42.41003429953395
          ],
          [
            -71.11366949659443,
            42.410034299766984
          ],
          [
            -71.11366949829721,
            42.410034299883485
          ],
          [
            -71.1136694991486,
            42.41003429994174
          ],
          [
            -71.1136694995743,
            42.41003429997087
          ],
          [
            -71.11366949978715,
            42.410034299985426
          ],
          [
            -71.11366949989358,
            42.41003429999272
          ],
          [
            -71.11366949994678,
            42.41003429999636
          ],
          [
            -71.11366949997338,
            42.41003429999818
          ],
          [
            -71.11366949998668,
            42.4100342999991
          ],
          [
            -71.11366949999335,
            42.410034299999545
          ],
          [
            -71.11366949999667,
            42.410034299999765
          ],
          [
            -71.11366949999834,
            42.410034299999886
          ],
          [
            -71.11366949999918,
            42.41003429999994
          ],
          [
            -71.11366949999959,
            42.41003429999998
          ],
          [
            -71.11366949999979,
            42.41003429999999
          ],
          [
            -71.1136694999999,
            42.4100343
          ],
          [
            -71.11366949999996,
            42.4100343
          ],
          [
            -71.11366949999997,
            42.4100343
          ],
          [
            -71.11366949999999,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.1136695,
            42.4100343
          ],
          [
            -71.11188399652153,
            42.40991211385351
          ],
          [
            -71.11099124739106,
            42.40985101039013
          ],
          [
            -71.11054487347809,
            42.409820456060906
          ],
          [
            -71.1103216866847,
            42.40980517824692
          ],
          [
            -71.11021009332876,
            42.40979753917758
          ],
          [
            -71.11015429666098,
            42.40979371960232
          ],
          [
            -71.11012639832964,
            42.409791809804545
          ],
          [
            -71.11011244916462,
            42.409790854903115
          ],
          [
            -71.11010547458226,
            42.40979037745176
          ],
          [
            -71.11010198729112,
            42.40979013872593
          ],
          [
            -71.11010024364556,
            42.40979001936299
          ],
          [
            -71.11009937182278,
            42.409789959681504
          ],
          [
            -71.1100989359114,
            42.409789929840755
          ],
          [
            -71.11009871795571,
            42.40978991492038
          ],
          [
            -71.11009860897786,
            42.409789907460194
          ],
          [
            -71.11009855448893,
            42.40978990373011
          ],
          [
            -71.11009852724446,
            42.40978990186506
          ],
          [
            -71.11009851362223,
            42.40978990093252
          ],
          [
            -71.11009850681111,
            42.409789900466265
          ],
          [
            -71.11009850340555,
            42.40978990023313
          ],
          [
            -71.11009850170278,
            42.40978990011656
          ],
          [
            -71.1100985008514,
            42.409789900058286
          ],
          [
            -71.1100985004257,
            42.409789900029146
          ],
          [
            -71.11009850021286,
            42.40978990001457
          ],
          [
            -71.11009850010643,
            42.40978990000728
          ],
          [
            -71.11009850005321,
            42.409789900003645
          ],
          [
            -71.11009850002661,
            42.40978990000182
          ],
          [
            -71.11009850001331,
            42.40978990000091
          ],
          [
            -71.11009850000666,
            42.40978990000046
          ],
          [
            -71.11009850000333,
            42.40978990000023
          ],
          [
            -71.11009850000167,
            42.40978990000011
          ],
          [
            -71.11009850000084,
            42.40978990000006
          ],
          [
            -71.11009850000043,
            42.40978990000003
          ],
          [
            -71.11009850000022,
            42.40978990000001
          ],
          [
            -71.11009850000012,
            42.40978990000001
          ],
          [
            -71.11009850000006,
            42.40978990000001
          ],
          [
            -71.11009850000003,
            42.40978990000001
          ],
          [
            -71.11009850000002,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.40978990000001
          ],
          [
            -71.1100985,
            42.4097899
          ],
          [
            -71.110041,
            42.4097965
          ]
        ],
        "type": "LineString"
      },
      "properties": {},
      "type": "Feature"
    },
    {
      "geometry": {
        "coordinates": [
          [
            -71.1099749,
            42.4096919
          ],
          [
            -71.1100077,
            42.4097438
          ],
          [
            -71.1100077,
            42.4097438
          ],
          [
            -71.110041,
            42.4097965
          ]
        ],
        "type": "LineString"
      },
      "properties": {},
      "type": "Feature"
    },
    {
      "geometry": {
        "coordinates": [
          [
            -71.1138291,
            42.4099546
          ],
          [
            -71.1137791,
            42.4099938
          ],
          [
            -71.1137791,
            42.4099938
          ],
          [
            -71.1137085,
            42.410049
          ],
          [
            -71.11374380001554,
            42.41002140000541
          ],
          [
            -71.11376145001167,
            42.41000760000407
          ],
          [
            -71.11374380001554,
            42.41002140000541
          ],
          [
            -71.11372615001166,
            42.41003520000406
          ]
        ],
        "type": "LineString"
      },
      "properties": {},
      "type": "Feature"
    }
  ],
  "type": "FeatureCollection"
}
    "#;

    // Parse the JSON string into a serde_json::Value
    let mut geojson: Value = serde_json::from_str(geojson_str).expect("Invalid JSON");

    // Loop through each feature and its coordinates
    if let Some(features) = geojson.get_mut("features").and_then(Value::as_array_mut) {
        for feature in features {
            if let Some(coordinates) = feature
                .get_mut("geometry")
                .and_then(|geometry| geometry.get_mut("coordinates"))
                .and_then(Value::as_array_mut)
            {
                // Use a HashSet to filter out duplicate coordinates
                let mut seen = HashSet::new();
                coordinates.retain(|coord| seen.insert(coord.clone()));
            }
        }
    }

    // Print the cleaned GeoJSON
    println!("{}", serde_json::to_string_pretty(&geojson).expect("Failed to serialize JSON"));
}
